## Микросервис для работы с балансом пользователей

**Запуск:**

```bash
$ git clone https://github.com/kssenii/balanceServer
$ cd balanceServer
$ docker-compose build
$ docker-compose up
```

**Примеры запросов:**

-   Получение текущего баланса пользователя. Принимает id пользователя. Если параметр `currency` присутствует, то баланс пользователя конвертируется с рубля на указанную валюту.

```bash
$ curl localhost:9090 -X GET -d '{"id":1}'
$ curl localhost:9090 -X GET -d '{"id":1, "currency":"USD"}'
```

-   Начисление средств на баланс. Принимает id пользователя и сколько средств зачислить. Опциональный параметр `description` - откуда/зачем были зачислены средства (для сохранения данных о переводе, по умолчанию будет записан тип операции).

```bash
$ curl localhost:9090 -X POST -d '{"id":1, "sum":1000}'
$ curl localhost:9090 -X POST -d '{"id":1, "sum":1000, "description":"..."}'
```

-   Списание средств с баланса. Принимает id пользователя и сколько средств списать.

```bash
$ curl localhost:9090 -X POST -d '{"id":1, "sum":-1000}'
$ curl localhost:9090 -X POST -d '{"id":1, "sum":-1000, "description":"..."}'
```

-   Перевод средств от пользователя к пользователю. Принимает id пользователя с которого нужно списать средства, id пользователя которому должны зачислить средства, а также сумму.

```bash
$ curl localhost:9090 -X PUT -d '{"toID":1, "fromID":2, "sum":1000}'
$ curl localhost:9090 -X PUT -d '{"toID":1, "fromID":2, "sum":1000, "description":"..."}'
```

-   Получение списка транзакций с комментариями откуда и зачем были начислены/списаны средства с баланса. Можно указать параметр сортировки: по дате или по сумме. По умолчанию включена сортировка по дате.

```bash
$ curl localhost:9090/logs -X GET -d '{"id":1}'
$ curl localhost:9090/logs -X GET -d '{"id":1, "sort":"sum"}'
$ curl localhost:9090/logs -X GET -d '{"id":1, "sort":"time"}'
```